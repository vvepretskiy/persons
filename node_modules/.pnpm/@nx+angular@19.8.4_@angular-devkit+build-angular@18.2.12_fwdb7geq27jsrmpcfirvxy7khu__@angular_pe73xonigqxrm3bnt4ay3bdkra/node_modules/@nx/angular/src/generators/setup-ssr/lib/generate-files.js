"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateSSRFiles = generateSSRFiles;
const devkit_1 = require("@nx/devkit");
function generateSSRFiles(tree, schema, isUsingApplicationBuilder) {
    const { root: projectRoot, targets } = (0, devkit_1.readProjectConfiguration)(tree, schema.project);
    if (targets.server ||
        (isUsingApplicationBuilder && targets.build.options?.server !== undefined)) {
        // server has already been added
        return;
    }
    const pathToFiles = (0, devkit_1.joinPathFragments)(__dirname, '..', 'files');
    if (schema.standalone) {
        (0, devkit_1.generateFiles)(tree, (0, devkit_1.joinPathFragments)(pathToFiles, 'standalone'), projectRoot, { ...schema, tpl: '' });
    }
    else {
        (0, devkit_1.generateFiles)(tree, (0, devkit_1.joinPathFragments)(pathToFiles, 'ngmodule'), projectRoot, { ...schema, tpl: '' });
    }
}
