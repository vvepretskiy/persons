{"version":3,"sources":["../../../../../packages/vite/src/utils/e2e-web-server-info-utils.ts"],"sourcesContent":["import { type Tree, readNxJson } from '@nx/devkit';\nimport { getE2EWebServerInfo } from '@nx/devkit/src/generators/e2e-web-server-info-utils';\n\nexport async function getViteE2EWebServerInfo(\n  tree: Tree,\n  projectName: string,\n  configFilePath: string,\n  isPluginBeingAdded: boolean,\n  e2ePortOverride?: number\n) {\n  const nxJson = readNxJson(tree);\n  let e2ePort = e2ePortOverride ?? 4200;\n\n  if (\n    nxJson.targetDefaults?.['serve'] &&\n    nxJson.targetDefaults?.['serve'].options?.port\n  ) {\n    e2ePort = nxJson.targetDefaults?.['serve'].options?.port;\n  }\n\n  return getE2EWebServerInfo(\n    tree,\n    projectName,\n    {\n      plugin: '@nx/vite/plugin',\n      serveTargetName: 'serveTargetName',\n      serveStaticTargetName: 'previewTargetName',\n      configFilePath,\n    },\n    {\n      defaultServeTargetName: 'serve',\n      defaultServeStaticTargetName: 'preview',\n      defaultE2EWebServerAddress: `http://localhost:${e2ePort}`,\n      defaultE2ECiBaseUrl: 'http://localhost:4300',\n      defaultE2EPort: e2ePort,\n    },\n    isPluginBeingAdded\n  );\n}\n"],"names":["getViteE2EWebServerInfo","tree","projectName","configFilePath","isPluginBeingAdded","e2ePortOverride","nxJson","readNxJson","e2ePort","targetDefaults","options","port","getE2EWebServerInfo","plugin","serveTargetName","serveStaticTargetName","defaultServeTargetName","defaultServeStaticTargetName","defaultE2EWebServerAddress","defaultE2ECiBaseUrl","defaultE2EPort"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";+BAGsBA;;;eAAAA;;;wBAHgB;uCACF;AAE7B,eAAeA,wBACpBC,IAAU,EACVC,WAAmB,EACnBC,cAAsB,EACtBC,kBAA2B,EAC3BC,eAAwB;QAMtBC,wBACAA,sCAAAA;IALF,MAAMA,SAASC,IAAAA,kBAAU,EAACN;IAC1B,IAAIO,UAAUH,0BAAAA,kBAAmB;IAEjC,IACEC,EAAAA,yBAAAA,OAAOG,cAAc,qBAArBH,sBAAuB,CAAC,QAAQ,OAChCA,0BAAAA,OAAOG,cAAc,sBAArBH,uCAAAA,uBAAuB,CAAC,QAAQ,CAACI,OAAO,qBAAxCJ,qCAA0CK,IAAI,GAC9C;YACUL,uCAAAA;QAAVE,WAAUF,0BAAAA,OAAOG,cAAc,sBAArBH,wCAAAA,uBAAuB,CAAC,QAAQ,CAACI,OAAO,qBAAxCJ,sCAA0CK,IAAI;IAC1D;IAEA,OAAOC,IAAAA,0CAAmB,EACxBX,MACAC,aACA;QACEW,QAAQ;QACRC,iBAAiB;QACjBC,uBAAuB;QACvBZ;IACF,GACA;QACEa,wBAAwB;QACxBC,8BAA8B;QAC9BC,4BAA4B,CAAC,iBAAiB,EAAEV,QAAQ,CAAC;QACzDW,qBAAqB;QACrBC,gBAAgBZ;IAClB,GACAJ;AAEJ"}